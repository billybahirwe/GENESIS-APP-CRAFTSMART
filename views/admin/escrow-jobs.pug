extends ../layout

block append head
  link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css')

block content
  .container
    .dashboard-header
      h1.dashboard-title Jobs in Escrow
      p.dashboard-subtitle View all jobs that have funds held in escrow

    if pendingEscrowJobs && pendingEscrowJobs.length > 0
      table.table.table-striped(style="margin-top:1rem;")
        thead
          tr
            th Job Title
            th Employer
            th Craftsman
            th Status
            th Action
        tbody
          each job in pendingEscrowJobs
            tr
              td= job.title
              td= job.employer || 'N/A'
              td= job.craftsman || 'N/A'
              td= job.status
              td
                form(action=`/job/${job.jobId}/admin-confirm`, method="POST", onsubmit="return confirm('Are you sure you want to emergency confirm this payout?');")
                  input(type="hidden", name="adminId", value=adminId)
                  button.btn.btn-danger.btn-sm(type="submit") Emergency Confirm
    else
      .empty-state(style="margin-top:1rem; text-align:center;")
        i.fas.fa-check-circle(style="font-size:3rem; color:green;")
        h3 No Jobs in Escrow
        p All escrow funds have been managed

    a.btn.btn-secondary(href="/admin/dashboard") ‚Üê Back to Dashboard
