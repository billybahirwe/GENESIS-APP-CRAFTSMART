extends ../layout

block content
  .container
    .page-header
      h1.page-title= pageTitle
      p.page-subtitle Profile details for #{user.name}
    
    .profile-card
      .profile-info
        .info-row
          strong Full Name:
          span= user.name
        .info-row
          strong Email:
          span= user.email
        .info-row
          strong Mobile:
          span= user.mobile
        .info-row
          strong Role:
          span= user.role
        if user.location
          .info-row
            strong Location:
            span #{user.location.city}, #{user.location.district}, #{user.location.region}
        
        //- Craftsman-specific details
        if user.role === 'craftsman'
          .info-row
            strong Skills:
            span= user.skills ? user.skills.join(', ') : 'N/A'
          .info-row
            strong Experience:
            span= user.experience ? user.experience + ' years' : 'N/A'
          if user.bio
            .info-row
              strong Bio:
              span= user.bio

          //- File uploads (CV and Cover Letter)
          .info-row
            strong Files:
            if user.cvPath
              a(href=`${user.cvPath}`, target="_blank") View CV
            else
              span N/A
            if user.coverLetterPath
              a(href=`${user.coverLetterPath}`, target="_blank") View Cover Letter
            else
              span N/A

          //- Approval Status
          .info-row
            strong Status:
            if user.approved
              span.text-success Approved
            else
              span.text-warning Pending
    
    .profile-actions
      a.btn.btn-secondary(href="/admin/craftsmen" class=(user.role === 'craftsman' ? '' : 'hidden')) Back to Craftsmen
      a.btn.btn-secondary(href="/admin/employers" class=(user.role === 'employer' ? '' : 'hidden')) Back to Employers

      //- Show Approve button if craftsman is pending
      if user.role === 'craftsman' && !user.approved
        form(method="POST", action=`/admin/approve/${user._id}`)
          button.btn.btn-success(type="submit") Approve Profile
